<svg xmlns="http://www.w3.org/2000/svg" width="2400" height="1420" viewBox="0 0 2400 1420">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155" />
    </marker>
    <style>
      .title { font: 700 30px Arial, Helvetica, sans-serif; fill: #0f172a; }
      .svc { fill: #e0ecff; stroke: #1d4ed8; stroke-width: 2.2; rx: 14; ry: 14; }
      .db { fill: #ecfeff; stroke: #0f766e; stroke-width: 2.2; rx: 14; ry: 14; }
      .bus { fill: #f0fdf4; stroke: #15803d; stroke-width: 2.2; rx: 14; ry: 14; }
      .ext { fill: #fff7ed; stroke: #c2410c; stroke-width: 2.2; rx: 14; ry: 14; }
      .ops { fill: #fefce8; stroke: #a16207; stroke-width: 2.2; rx: 14; ry: 14; }
      .region { fill: none; stroke: #64748b; stroke-width: 2; stroke-dasharray: 8 6; rx: 16; ry: 16; }
      .label { font: 600 16px Arial, Helvetica, sans-serif; fill: #111827; text-anchor: middle; dominant-baseline: middle; }
      .small { font: 500 13px Arial, Helvetica, sans-serif; fill: #1f2937; text-anchor: middle; dominant-baseline: middle; }
      .line { stroke: #334155; stroke-width: 2.3; fill: none; marker-end: url(#arrow); }
      .note { font: 500 14px Arial, Helvetica, sans-serif; fill: #475569; }
    </style>
  </defs>

  <text x="1200" y="42" class="title" text-anchor="middle">Final Consolidated Design: Billion-User Global GPS Navigation Platform</text>

  <rect class="svc" x="60" y="100" width="260" height="95" />
  <text class="label" x="190" y="148">Global Clients</text>
  <text class="small" x="190" y="170">mobile/web/car</text>

  <rect class="ext" x="60" y="230" width="260" height="95" />
  <text class="label" x="190" y="278">Offline Pack Engine</text>

  <rect class="svc" x="390" y="100" width="290" height="95" />
  <text class="label" x="535" y="148">Anycast DNS + Edge WAF</text>

  <rect class="svc" x="740" y="100" width="260" height="95" />
  <text class="label" x="870" y="148">Edge API Gateway</text>

  <rect class="bus" x="1060" y="100" width="280" height="95" />
  <text class="label" x="1200" y="148">Global CDN</text>
  <text class="small" x="1200" y="170">tiles/voice/offline packs</text>

  <rect class="region" x="140" y="280" width="1030" height="540" />
  <text class="label" x="655" y="306">Region A Cell (Primary for nearby users)</text>

  <rect class="svc" x="190" y="350" width="230" height="90" />
  <text class="small" x="305" y="395">Regional API</text>

  <rect class="svc" x="450" y="350" width="260" height="90" />
  <text class="small" x="580" y="395">Route Orchestrator</text>

  <rect class="svc" x="740" y="350" width="260" height="90" />
  <text class="small" x="870" y="395">Route Compute Cluster</text>

  <rect class="svc" x="190" y="470" width="230" height="90" />
  <text class="small" x="305" y="515">Search Service</text>

  <rect class="svc" x="450" y="470" width="260" height="90" />
  <text class="small" x="580" y="515">Session + Reroute Manager</text>

  <rect class="svc" x="740" y="470" width="260" height="90" />
  <text class="small" x="870" y="515">Traffic Query API</text>

  <rect class="db" x="190" y="610" width="230" height="90" />
  <text class="small" x="305" y="655">Graph Shards</text>

  <rect class="bus" x="450" y="610" width="260" height="90" />
  <text class="small" x="580" y="655">Hot Traffic Cache</text>

  <rect class="db" x="740" y="610" width="260" height="90" />
  <text class="small" x="870" y="655">POI + Session Stores</text>

  <rect class="region" x="1230" y="280" width="1030" height="540" />
  <text class="label" x="1745" y="306">Region B Cell (Secondary + active traffic)</text>

  <rect class="svc" x="1280" y="350" width="230" height="90" />
  <text class="small" x="1395" y="395">Regional API</text>

  <rect class="svc" x="1540" y="350" width="260" height="90" />
  <text class="small" x="1670" y="395">Route Orchestrator</text>

  <rect class="svc" x="1830" y="350" width="260" height="90" />
  <text class="small" x="1960" y="395">Route Compute Cluster</text>

  <rect class="svc" x="1280" y="470" width="230" height="90" />
  <text class="small" x="1395" y="515">Search Service</text>

  <rect class="svc" x="1540" y="470" width="260" height="90" />
  <text class="small" x="1670" y="515">Session + Reroute Manager</text>

  <rect class="svc" x="1830" y="470" width="260" height="90" />
  <text class="small" x="1960" y="515">Traffic Query API</text>

  <rect class="db" x="1280" y="610" width="230" height="90" />
  <text class="small" x="1395" y="655">Graph Shards</text>

  <rect class="bus" x="1540" y="610" width="260" height="90" />
  <text class="small" x="1670" y="655">Hot Traffic Cache</text>

  <rect class="db" x="1830" y="610" width="260" height="90" />
  <text class="small" x="1960" y="655">POI + Session Stores</text>

  <rect class="bus" x="500" y="860" width="1380" height="190" />
  <text class="label" x="1190" y="888">Global Real-Time Data Plane</text>

  <rect class="ext" x="560" y="920" width="220" height="90" />
  <text class="small" x="670" y="965">Probe Telemetry</text>

  <rect class="ext" x="810" y="920" width="220" height="90" />
  <text class="small" x="920" y="965">Partner Traffic Feeds</text>

  <rect class="ext" x="1060" y="920" width="220" height="90" />
  <text class="small" x="1170" y="965">Crowd Incidents</text>

  <rect class="svc" x="1310" y="920" width="280" height="90" />
  <text class="small" x="1450" y="965">Stream Processors + Trust</text>

  <rect class="db" x="1620" y="920" width="250" height="90" />
  <text class="small" x="1745" y="965">Traffic History Lake</text>

  <rect class="ops" x="500" y="1090" width="1380" height="280" />
  <text class="label" x="1190" y="1120">Global Control Plane</text>

  <rect class="ops" x="560" y="1160" width="250" height="90" />
  <text class="small" x="685" y="1205">Map Build + QA</text>

  <rect class="ops" x="850" y="1160" width="250" height="90" />
  <text class="small" x="975" y="1205">ETA/Traffic ML Training</text>

  <rect class="ops" x="1140" y="1160" width="250" height="90" />
  <text class="small" x="1265" y="1205">Versioned Config Rollout</text>

  <rect class="ops" x="1430" y="1160" width="250" height="90" />
  <text class="small" x="1555" y="1205">Replication + Failover Policy</text>

  <rect class="ops" x="1720" y="1160" width="250" height="90" />
  <text class="small" x="1845" y="1205">SLO / Canary / Rollback</text>

  <line class="line" x1="320" y1="148" x2="390" y2="148" />
  <line class="line" x1="680" y1="148" x2="740" y2="148" />
  <line class="line" x1="1000" y1="148" x2="1060" y2="148" />

  <line class="line" x1="870" y1="195" x2="305" y2="350" />
  <line class="line" x1="870" y1="195" x2="1395" y2="350" />

  <line class="line" x1="420" y1="395" x2="450" y2="395" />
  <line class="line" x1="710" y1="395" x2="740" y2="395" />
  <line class="line" x1="580" y1="440" x2="580" y2="470" />
  <line class="line" x1="580" y1="560" x2="580" y2="610" />
  <line class="line" x1="870" y1="440" x2="870" y2="470" />
  <line class="line" x1="870" y1="560" x2="870" y2="610" />
  <line class="line" x1="870" y1="440" x2="305" y2="610" />

  <line class="line" x1="1510" y1="395" x2="1540" y2="395" />
  <line class="line" x1="1800" y1="395" x2="1830" y2="395" />
  <line class="line" x1="1670" y1="440" x2="1670" y2="470" />
  <line class="line" x1="1670" y1="560" x2="1670" y2="610" />
  <line class="line" x1="1960" y1="440" x2="1960" y2="470" />
  <line class="line" x1="1960" y1="560" x2="1960" y2="610" />
  <line class="line" x1="1960" y1="440" x2="1395" y2="610" />

  <path class="line" d="M 1000 420 C 1220 220, 1500 220, 1830 420" />
  <path class="line" d="M 1830 510 C 1500 710, 1220 710, 1000 510" />

  <line class="line" x1="1450" y1="920" x2="580" y2="700" />
  <line class="line" x1="1450" y1="920" x2="1670" y2="700" />
  <line class="line" x1="1450" y1="920" x2="1745" y2="920" />

  <line class="line" x1="685" y1="1250" x2="580" y2="700" />
  <line class="line" x1="975" y1="1250" x2="870" y2="700" />
  <line class="line" x1="1265" y1="1250" x2="1395" y2="700" />
  <line class="line" x1="1555" y1="1250" x2="1670" y2="700" />
  <line class="line" x1="1845" y1="1250" x2="1960" y2="700" />

  <line class="line" x1="1200" y1="195" x2="190" y2="230" />
  <line class="line" x1="190" y1="230" x2="1200" y2="195" />

  <text class="note" x="1120" y="250">active-active regions support failover without full service loss</text>
  <text class="note" x="1010" y="1065">streaming plane updates live traffic cache and reroute signals continuously</text>
  <text class="note" x="980" y="1388">global control plane keeps map/model/config versions safe, observable, and rollbackable</text>
</svg>
