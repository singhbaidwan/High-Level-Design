<svg xmlns="http://www.w3.org/2000/svg" width="2200" height="1220" viewBox="0 0 2200 1220">
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155" />
    </marker>
    <style>
      .title { font: 700 30px Arial, Helvetica, sans-serif; fill: #0f172a; }
      .svc { fill: #e0ecff; stroke: #1d4ed8; stroke-width: 2.2; rx: 14; ry: 14; }
      .db { fill: #ecfeff; stroke: #0f766e; stroke-width: 2.2; rx: 14; ry: 14; }
      .bus { fill: #f0fdf4; stroke: #15803d; stroke-width: 2.2; rx: 14; ry: 14; }
      .ops { fill: #fefce8; stroke: #a16207; stroke-width: 2.2; rx: 14; ry: 14; }
      .region { fill: none; stroke: #64748b; stroke-width: 2; stroke-dasharray: 8 6; rx: 16; ry: 16; }
      .label { font: 600 17px Arial, Helvetica, sans-serif; fill: #111827; text-anchor: middle; dominant-baseline: middle; }
      .small { font: 500 14px Arial, Helvetica, sans-serif; fill: #1f2937; text-anchor: middle; dominant-baseline: middle; }
      .line { stroke: #334155; stroke-width: 2.4; fill: none; marker-end: url(#arrow); }
      .note { font: 500 14px Arial, Helvetica, sans-serif; fill: #475569; }
    </style>
  </defs>

  <text x="1100" y="46" class="title" text-anchor="middle">Intermediate Design 4: Geo-Distributed Regional Navigation Cells</text>

  <rect class="svc" x="70" y="120" width="240" height="100" />
  <text class="label" x="190" y="170">Global Clients</text>

  <rect class="svc" x="370" y="120" width="280" height="100" />
  <text class="label" x="510" y="170">Anycast DNS + WAF</text>

  <rect class="bus" x="710" y="120" width="280" height="100" />
  <text class="label" x="850" y="170">CDN Edge POPs</text>

  <rect class="region" x="70" y="290" width="650" height="420" />
  <text class="label" x="395" y="315">Americas Region Cell</text>

  <rect class="svc" x="110" y="350" width="180" height="90" />
  <text class="small" x="200" y="395">Regional API</text>

  <rect class="svc" x="320" y="350" width="180" height="90" />
  <text class="small" x="410" y="395">Route/Search</text>

  <rect class="svc" x="530" y="350" width="160" height="90" />
  <text class="small" x="610" y="395">Traffic Svc</text>

  <rect class="db" x="120" y="500" width="180" height="90" />
  <text class="small" x="210" y="545">Graph Shards</text>

  <rect class="db" x="330" y="500" width="180" height="90" />
  <text class="small" x="420" y="545">POI Index</text>

  <rect class="bus" x="540" y="500" width="160" height="90" />
  <text class="small" x="620" y="545">Traffic Cache</text>

  <rect class="region" x="780" y="290" width="650" height="420" />
  <text class="label" x="1105" y="315">EMEA Region Cell</text>

  <rect class="svc" x="820" y="350" width="180" height="90" />
  <text class="small" x="910" y="395">Regional API</text>

  <rect class="svc" x="1030" y="350" width="180" height="90" />
  <text class="small" x="1120" y="395">Route/Search</text>

  <rect class="svc" x="1240" y="350" width="160" height="90" />
  <text class="small" x="1320" y="395">Traffic Svc</text>

  <rect class="db" x="830" y="500" width="180" height="90" />
  <text class="small" x="920" y="545">Graph Shards</text>

  <rect class="db" x="1040" y="500" width="180" height="90" />
  <text class="small" x="1130" y="545">POI Index</text>

  <rect class="bus" x="1250" y="500" width="160" height="90" />
  <text class="small" x="1330" y="545">Traffic Cache</text>

  <rect class="region" x="1490" y="290" width="650" height="420" />
  <text class="label" x="1815" y="315">APAC Region Cell</text>

  <rect class="svc" x="1530" y="350" width="180" height="90" />
  <text class="small" x="1620" y="395">Regional API</text>

  <rect class="svc" x="1740" y="350" width="180" height="90" />
  <text class="small" x="1830" y="395">Route/Search</text>

  <rect class="svc" x="1950" y="350" width="160" height="90" />
  <text class="small" x="2030" y="395">Traffic Svc</text>

  <rect class="db" x="1540" y="500" width="180" height="90" />
  <text class="small" x="1630" y="545">Graph Shards</text>

  <rect class="db" x="1750" y="500" width="180" height="90" />
  <text class="small" x="1840" y="545">POI Index</text>

  <rect class="bus" x="1960" y="500" width="160" height="90" />
  <text class="small" x="2040" y="545">Traffic Cache</text>

  <rect class="ops" x="520" y="820" width="1160" height="290" />
  <text class="label" x="1100" y="850">Global Control Plane</text>

  <rect class="ops" x="580" y="890" width="240" height="90" />
  <text class="small" x="700" y="935">Map Build Pipeline</text>

  <rect class="ops" x="870" y="890" width="240" height="90" />
  <text class="small" x="990" y="935">ETA Model Registry</text>

  <rect class="ops" x="1160" y="890" width="240" height="90" />
  <text class="small" x="1280" y="935">Config + Feature Flags</text>

  <rect class="ops" x="1450" y="890" width="180" height="90" />
  <text class="small" x="1540" y="935">Global SLO Ops</text>

  <line class="line" x1="310" y1="170" x2="370" y2="170" />
  <line class="line" x1="650" y1="170" x2="710" y2="170" />

  <line class="line" x1="850" y1="220" x2="250" y2="350" />
  <line class="line" x1="850" y1="220" x2="960" y2="350" />
  <line class="line" x1="850" y1="220" x2="1670" y2="350" />

  <line class="line" x1="290" y1="395" x2="320" y2="395" />
  <line class="line" x1="500" y1="395" x2="530" y2="395" />
  <line class="line" x1="410" y1="440" x2="210" y2="500" />
  <line class="line" x1="420" y1="440" x2="420" y2="500" />
  <line class="line" x1="610" y1="440" x2="620" y2="500" />

  <line class="line" x1="1000" y1="395" x2="1030" y2="395" />
  <line class="line" x1="1210" y1="395" x2="1240" y2="395" />
  <line class="line" x1="1120" y1="440" x2="920" y2="500" />
  <line class="line" x1="1130" y1="440" x2="1130" y2="500" />
  <line class="line" x1="1320" y1="440" x2="1330" y2="500" />

  <line class="line" x1="1710" y1="395" x2="1740" y2="395" />
  <line class="line" x1="1920" y1="395" x2="1950" y2="395" />
  <line class="line" x1="1830" y1="440" x2="1630" y2="500" />
  <line class="line" x1="1840" y1="440" x2="1840" y2="500" />
  <line class="line" x1="2030" y1="440" x2="2040" y2="500" />

  <line class="line" x1="700" y1="980" x2="390" y2="590" />
  <line class="line" x1="990" y1="980" x2="1105" y2="590" />
  <line class="line" x1="1280" y1="980" x2="1815" y2="590" />

  <path class="line" d="M 700 935 C 980 780, 1250 780, 1540 935" />

  <text class="note" x="1060" y="760">regional cells isolate failures and keep data near users</text>
  <text class="note" x="930" y="1120">global control plane ships map/model versions consistently</text>
</svg>
